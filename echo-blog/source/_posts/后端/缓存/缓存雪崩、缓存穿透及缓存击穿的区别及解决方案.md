---
title: 缓存
categories:
- 后端/缓存
tags: redis
date:
---

> 总括：缓存雪崩可以理解为“面”的概念，因为是针对整个缓存环境而言的，而缓存穿透和缓存击穿可以理解为“点”的概念，因为是针对缓存中的某个方面而言的.

## 缓存雪崩：
   出现的场景：当整个缓存体系宕机的情况，所有的请求都会直接去请求数据库，当并发量比较大的情况下，很容易让数据库宕机，导致服务崩掉；

   解决方案：

       - 缓存方面：搭建缓存集群，做到高可用，这样可以预防整个缓存体系 
          宕机而直接操作数据库的情况；
       - 另一方面，可以采用断路器机制，当缓存宕机时，限制部分请求可以操作数据库，这样能防止整个系统宕机，其余的情况可以返回断路器的默认值即可；

## 缓存穿透：-------所以任何时候都要要求后台对参数进行严格的校验，要有不相信的眼光去看待参数，校验不通过，直接return，避免进一步操作
   出现场景：从缓存和数据库中都无法查询到某个key时，每次请求都会直接去请求数据库，当并发量比较大时，会导致数据库宕机；

   解决方案：将该键对应的value设置为null，这样就可以当缓存和数据库都无法查询到数据时，仍然会去操作数据库问题；

## 缓存击穿：
   出现场景：针对热数据大量进行频繁操作，当对应的key失效时，大量的请求就会直接请求在数据库上，导致数据库直接宕机；
   
   解决方案：对热数据设置永久不过期；