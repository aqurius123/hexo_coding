---
title: 服务注册发现
categories:
- 后端
tags: 服务注册发现
date: 2021-04-27
---

## 服务提供者、服务发现者及服务注册发现中心三者关系
- 各个微服务启动在启动时，将自己的网络地址等信息注册到服务发现组件中，服务发现组件会存储这些信息；
- 服务发现者可以从服务发现组件查询服务提供者的网络地址等信息，并使用网络地址直接调用服务提供者(**注意：发现者是根据网络地址直接调用服务提供者的**)；
- 各个微服务和服务发现组件之间通过一定机制(心跳)来实现服务间的通信。服务发现组件如果长时间无法与某微服务实例通信，则会注销该实例。
- 微服务网络地址发生变更(实例增减、ip端口变更)时，会重新注册服务到服务发现组件。使用这种方式，服务消费者就无需去手动修改服务提供者的网络地址等信息了。---**默认心跳机制为每隔30s**

## 服务发现组件功能
- 服务注册表：是服务发现组件的核心。用来记录各个微服务的信息(例如：名称、ip、端口等)，服务注册表提供查询API和管理API。查询API用于查询可用的微服务实例，管理API用于服务的注册与注销。
- 服务注册与发现：服务注册是指微服务在启动时将自己的网络地址等信息注册到服务发现中心的过程。服务发现是指查询可用微服务列表及其网络地址机制。
- 服务检查：服务发现组件使用一定机制定时检测已注册的服务。如果发现其实例长时间无法访问则从服务注册表中移除该服务实例。

## Eureka Server、Eureka Client、Application Server及Application Client的关联关系
- Eureka Server: 服务注册发现中心；
- Eureka Client: Java客户端，用于简化与Eureka Server的交互；每个Application Server和Application Client内部都有一个Eureka Client,特别是服务消费者会在客户端对服务提供者网络地址等信息进行缓存处理，避免由于服务注册发现中心和服务提供者异常或宕机而导致服务不能使用；
- Application Server: 服务提供者；
- Application Client：服务消费者；